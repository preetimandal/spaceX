<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
    <link rel="stylesheet" href="customStyle.css">
    <!-- JS Library -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
</head>
<body>

    <header>
        <h1>SpaceX Launch Programs</h1>
    </header>

    <section>
        <nav class="navFilter">
          <h4>Filter</h4>
          <div class="launchYear-main">
            <h5>Launch Year</h5>
            <div class="parentCount-2">
                <ul>
                    <li><a href="#">2006</a></li>
                    <li><a href="#">2007</a></li>
                    <li><a href="#">2008</a></li>
                    <li><a href="#">2009</a></li>
                    <li><a href="#">2010</a></li>
                    <li><a href="#">2011</a></li>
                    <li><a href="#">2012</a></li>
                    <li><a href="#">2013</a></li>
                    <li><a href="#">2014</a></li>
                    <li><a href="#">2015</a></li>
                    <li><a href="#">2016</a></li>
                    <li><a href="#">2017</a></li>
                    <li><a href="#">2018</a></li>
                    <li><a href="#">2019</a></li>
                    <li><a href="#">2020</a></li>
                </ul>
            </div>
          </div>
          <div class="SuccessfulLaunch-main">
            <h5>Successful Launch</h5>
            <div class="parentCount-2">
                <ul>
                    <li><a id="a1" value="true" onclick="successLaunch()">True</a></li>
                    <li><a id="a1" value="false" onclick="successLaunch()">false</a></li>
                </ul>
            </div>
          </div>

          <div class="SuccessfullLanding-main">
            <h5>Successful Landing</h5>
            <div class="parentCount-2">
                <ul>
                    <li><a href="#">True</a></li>
                    <li><a href="#">false</a></li>
                </ul>
            </div>
          </div>
        </nav>
        
        <article id="artical1">
            <!-- <div class="spaceXLaunchProgram"> 
                <div class="imageDiv">
                    <img src="img_girl.jpg" alt="Girl in a jacket" width="500" height="600">
                </div>
                <h6>DemoSet#1</h6>
                <ul class="list-unstyled">
                    <li>Mission Ids: <p>{missionIds}</p></li>
                    <li>Launch Year: <p>{2006}</p></li>
                    <li>Successful Launch: <p id="launchData">{}</p></li>
                    <li>Successful Landing: <p>{launch_Landing}</p></li>
                </ul>
            </div>

            <div class="spaceXLaunchProgram"> 
                <div class="imageDiv">
                    <img src="img_girl.jpg" alt="Girl in a jacket" width="500" height="600">
                </div>
                <h6>DemoSet#1</h6>
                <ul class="list-unstyled">
                    <li>Mission Ids: <p>{missionIds}</p></li>
                    <li>Launch Year: <p>{2006}</p></li>
                    <li>Successful Launch: <p>{False}</p></li>
                    <li>Successful Landing: <p>{launch_Landing}</p></li>
                </ul>
            </div>

            <div class="spaceXLaunchProgram"> 
                <div class="imageDiv">
                    <img src="img_girl.jpg" alt="Girl in a jacket" width="500" height="600">
                </div>
                <h6>DemoSet#1</h6>
                <ul class="list-unstyled">
                    <li>Mission Ids: <p>{missionIds}</p></li>
                    <li>Launch Year: <p>{2006}</p></li>
                    <li>Successful Launch: <p>{False}</p></li>
                    <li>Successful Landing: <p>{launch_Landing}</p></li>
                </ul>
            </div>

            <div class="spaceXLaunchProgram"> 
                  <div class="imageDiv">
                    <img src="img_girl.jpg" alt="Girl in a jacket" width="500" height="600">
                </div>
                <h6>DemoSet#1</h6>
                <ul class="list-unstyled">
                    <li>Mission Ids: <p>{missionIds}</p></li>
                    <li>Launch Year: <p>{2006}</p></li>
                    <li>Successful Launch: <p>{False}</p></li>
                    <li>Successful Landing: <p>{launch_Landing}</p></li>
                </ul>
            </div>

            <div class="spaceXLaunchProgram"> 
                <div class="imageDiv">
                  <img src="img_girl.jpg" alt="Girl in a jacket" width="500" height="600">
                </div>
                <h6>DemoSet#1</h6>
                <ul class="list-unstyled">
                    <li>Mission Ids: <p>{missionIds}</p></li>
                    <li>Launch Year: <p>{2006}</p></li>
                    <li>Successful Launch: <p>{False}</p></li>
                    <li>Successful Landing: <p>{launch_Landing}</p></li>
                </ul>
            </div>

            <div class="spaceXLaunchProgram"> 
                <div class="imageDiv">
                    <img src="img_girl.jpg" alt="Girl in a jacket" width="500" height="600">
                </div>
                <h6>DemoSet#1</h6>
                <ul class="list-unstyled">
                    <li>Mission Ids: <p>{missionIds}</p></li>
                    <li>Launch Year: <p>{2006}</p></li>
                    <li>Successful Launch: <p>{False}</p></li>
                    <li>Successful Landing: <p>{launch_Landing}</p></li>
                </ul>
            </div> -->
        </article>
      </section>

</body>
<script type="text/javascript">
     document.addEventListener("DOMContentLoaded", function(){
        // event.preventDefault();
        // let form = this.elements;
        let xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://api.spacexdata.com/v3/launches?limit=100', true);
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.onload = function () {
            let response = JSON.parse(this.responseText);
            console.log("---res--",response);

        };
        xhr.send();
    });

    function successLaunch() {
        debugger;
        let aa = document.getElementById("a1").getAttribute("value");
        console.log(aa);
        let xhr = new XMLHttpRequest();
        // let data = 'csrfmiddlewaretoken='+form['csrfmiddlewaretoken'].value+'&promo_code='+form['promo_code'].value+'&title='+'&overview='+form['overview'].value+'&start_date='+form['start_date'].value+'&end_date='+form['end_date'].value+'&promotion_type='+form['promotion_type'].value+'&dollar_amount='+form['dollar_amount'].value+'&percentage='+form['percentage'].value+'&fixed_selling_price='+form['fixed_selling_price'].value+'&buy_x_get_x='+form['buy_x_get_x'].value+'&promo_admin='+form['promo_admin'].value+'&usage_limit='+form['usage_limit'].value+'&usage_limit_type='+form['usage_limit_type'].value+'&user='+"{{request.user.FullName}}";

        xhr.open('GET','https://api.spaceXdata.com/v3/launches?limit=100&launch_success=' + aa ,true);
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

        xhr.onload = function () {
            let response = JSON.parse(this.responseText);
            console.log("--post--",response);
            // for (var i = 0; i < response.length; i++) {   


              
                var html = `
                <div>
                ${response.map((approveViewPermission, index) => {
                    console.log("-s--",approveViewPermission.links.mission_patch )
                    return `
                    <div class='spaceXLaunchProgram'> 
                        <div class='imageDiv'>
                            <img src='${approveViewPermission.links.mission_patch}'>
                        </div>
                   
                        <ul class='list-unstyled'>
                            <li>Mission Ids:<p>${approveViewPermission.mission_id}</p></li>
                            <li>Launch Year:<p>${approveViewPermission.launch_year}</p></li>
                            <li>Successful Launch: <p>${approveViewPermission.launch_success}</p></li>
                        </ul>
                    </div>`
                    }).join('')}
                </div>`
        $("#artical1").html(html);

            // }
        };
        xhr.send();

    }
</script>
</html>
